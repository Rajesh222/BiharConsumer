<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:util="http://www.springframework.org/schema/util"
	xsi:schemaLocation="
       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
       http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-4.0.xsd
       ">

	<util:map id="queriesMap" key-type="java.lang.String"
		value-type="java.lang.String">
		<entry key="SELECT_USER">
			<value>
				select * from user_master
			</value>
		</entry>

		<!-- START USER SERVICE QUERY -->
		<entry key="INSERT_USER_LOGS">
			<value>
				INSERT INTO user_master (name, email,
				address,phonenumber,pannumber, password, city, state, islock,
				isactive,
				createdby, createdon, modifyby, modifyon) VALUES
				(? ,? , ? ,
				? , ? , ?,?,?, false, true, Session_user, CURRENT_TIMESTAMP,
				Session_user, CURRENT_TIMESTAMP)
			</value>
		</entry>
		<entry key="INSERT_MODULE_LOGS">
			<value>
				INSERT INTO user_module (userid,
				privilegename,isrecharge,isbillpayment,ismoneytransfer,isaddmoney,isexportreport,isbusbook,createdby,
				createdon, modifyby, modifyon) VALUES
				(?, ? ,true , true , true ,
				true , true, true, Session_user,
				CURRENT_TIMESTAMP, Session_user,
				CURRENT_TIMESTAMP)
			</value>
		</entry>
		<entry key="UPDATE_LOCK_USER">
			<value>
				UPDATE user_master SET attempt = ?,islock=? WHERE userId = ?
			</value>
		</entry>
		<entry key="SELECT_USER_DETAIL_BY_PHONE">
			<value>
				SELECT * FROM user_master left outer join user_module on
				user_master.userId=user_module.userId where user_master.phoneNumber
				= ? and islock=false and isactive=true and
				user_module.privilegename='RETAILER' limit 1
			</value>
		</entry>
		<entry key="SELECT_USER_DETAIL_BY_EMAIL">
			<value>
				SELECT * FROM user_master left outer join user_module on
				user_master.userId=user_module.userId where user_master.email
				= ? and
				islock=false and isactive=true and
				user_module.privilegename='RETAILER' limit 1
			</value>
		</entry>
		<entry key="UPDATE_USER_PASSWORD">
			<value>
				UPDATE user_master SET password = ? WHERE userId = ?
			</value>
		</entry>
		<entry key="AUTH_USER_BY_PHONE">
			<value>
				SELECT * FROM user_master left outer join user_module on
				user_master.userId=user_module.userId where user_master.phoneNumber
				= ? and password=? and islock=false and isactive=true and
				user_module.privilegename='RETAILER' limit 1
			</value>
		</entry>
		<entry key="AUTH_USER_BY_EMAIL">
			<value>
				SELECT * FROM user_master left outer join user_module on
				user_master.userId=user_module.userId where user_master.email
				= ? and
				password=? and islock=false and isactive=true and
				user_module.privilegename='RETAILER' limit 1
			</value>
		</entry>
		<entry key="LOGOUT_USER">
			<value>
				update user_login set logout_date= now(), clientip=? where
				userid =? and logout_date is null
			</value>
		</entry>
		<!-- END USER SERVICE QUERY -->
		<!-- START TOPCITY SERVICE QUERY -->
		<entry key="TOP_CITIES_LOGS">
			<value>
				select * from top_cities order by refnumber
			</value>
		</entry>
		<entry key="SEARCH_TOP_CITIES_LOGS">
			<value>
				select * from top_cities where lower(displayName) like ? order
				by refnumber
			</value>
		</entry>
		<entry key="INSERT_TOP_CITIES">
			<value>
				INSERT INTO top_cities (cityname,displayname,statename)
				VALUES(?,?,?)
			</value>
		</entry>

		<!-- END TOPCITY SERVICE QUERY -->
		<!-- START WALLET SERVICE QUERY -->
		<entry key="GET_WALLET_HISTORY_DETAILS">
			<value>
				select * from user_wallet where lower(userId)=? order by
				modifyon desc
			</value>
		</entry>
		<entry key="GET_WALLET_DETAILS">
			<value>
				select * from user_wallet where lower(userId)=? order by
				modifyon desc limit 1
			</value>
		</entry>
		<entry key="UPDATE_WALLET_DETAILS">
			<value>
				UPDATE user_wallet set addedBalance=?,
				currentBalance=currentBalance+addedBalance,
				previousBalance=currentBalance where lower(userId)=?
			</value>
		</entry>
		<!-- END WALLET SERVICE QUERY -->
		<!-- START ROUT SERVICE QUERY -->
		<entry key="SELECT_BUS_ROUT_DETAILS_BY_SRC_AND_DESC">
			<value>
				select *,
				(select string_agg(distinct seattype,'/') from bus_seat_details_transaction
				where busid=bus.busid and travelDate
				::Date = ? ::date) seattype
				from bus_rout_details_transaction rout inner join
				bus_details_transaction bus on rout.busid=bus.busid
				where lower(rout.srccityname) like ? or lower(rout.destcityname)
				like ? and travaldate::date = ? ::date
			</value>
		</entry>
		<entry
			key="SELECT_BUS_BOADING_AND_STOPING_POINT_DETAILS_BY_TRIPID">
			<value>
				select * from bus_boardingstopingpoint_details where busid
				='1'
			</value>
		</entry>
		<entry key="SELECT_BUSTYPE_BY_BUSID">
			<value>
				select * from bus_type order by bustype
			</value>
		</entry>
		<entry key="SELECT_CANCELLATION_POLICIES_BY_BUSID">
			<value>
				select * from bus_cancellation_policies order by createdon
			</value>
		</entry>
		<entry key="SELECT_BUS_AMENITIES_BY_BUSID">
			<value>
				select * from bus_amenities order by id
			</value>
		</entry>
		<entry key="SELECT_BUS_DETAILS_BY_SOURCE_AND_DESTINATION">
			<value>
				select * from bus_details where sourceid = (select refnumber
				from top_cities where displayname like ? ) and destinationid =
				(select refnumber from top_cities where displayname like ? )
			</value>
		</entry>
		<entry key="SELECT_BUS_SEATS_DETAILS_BY_BUSID_AND_DATE">
			<value>
				select * from bus_seat_details_transaction where busId=? and
				traveldate::Date = ? ::date
			</value>
		</entry>

	</util:map>
</beans>